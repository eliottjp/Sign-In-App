<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Admin Dashboard - Visitor & Staff Management</title>

        <!-- Google Font for a modern look -->
        <link
            href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
            rel="stylesheet" />

        <!-- Font Awesome Icons -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />

        <!-- Custom Admin CSS -->
        <link rel="stylesheet" href="admin.css" />

        <!-- Firebase SDKs -->
        <script
            src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
        <script
            src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

        <!-- Firebase Configuration -->
        <script>
      const firebaseConfig = {
        apiKey: "AIzaSyAJ5lJoueMwV8osZmwO-hqibOqlNXfqkqM",
        authDomain: "sign-in-app-14d9d.firebaseapp.com",
        projectId: "sign-in-app-14d9d",
        storageBucket: "sign-in-app-14d9d",
        messagingSenderId: "352962654007",
        appId: "1:352962654007:web:16a8b36f129a961f78b4b2"
      };
      firebase.initializeApp(firebaseConfig);
    </script>

        <!-- Custom Admin JS -->
        <script defer src="admin.js"></script>
    </head>
    <body>
        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <h2>Admin Dashboard</h2>
            <nav>
                <ul>
                    <li>
                        <a href="#" data-page="dashboard" class="active"><i
                                class="fa fa-home"></i> Dashboard</a>
                    </li>
                    <li>
                        <a href="#" data-page="current-visitors"><i
                                class="fa fa-user-check"></i> Current
                            Visitors</a>
                    </li>
                    <li>
                        <a href="#" data-page="all-visitors"><i
                                class="fa fa-users"></i> All Visitors</a>
                    </li>
                    <li>
                        <a href="#" data-page="staff-attendance"><i
                                class="fa fa-user-tie"></i> Staff</a>
                    </li>
                    <li>
                        <a href="#" data-page="emergency-report"
                            class="emergency"><i
                                class="fa fa-exclamation-triangle"></i>
                            Emergency</a>
                    </li>
                </ul>
            </nav>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Dashboard Page -->
            <div id="dashboard" class="page active">
                <h1>Dashboard</h1>
                <!-- Dashboard Counters -->
                <div id="dashboard-counters">
                    <div class="grid">
                        <div class="grid-item">
                            <h3>
                                Current Visitors:
                                <span id="dashboard-current">0</span>
                            </h3>
                        </div>
                        <div class="grid-item">
                            <h3>
                                Total Visitors:
                                <span id="dashboard-all">0</span>
                            </h3>
                        </div>
                        <div class="grid-item">
                            <h3>
                                Staff Signed In:
                                <span id="dashboard-staff">0</span>
                            </h3>
                        </div>
                    </div>
                </div>
                <!-- Dashboard Grid -->
                <div class="grid">
                    <div class="grid-item">
                        <h3><i class="fa fa-search"></i> Search Visitor</h3>
                        <input type="text" id="search-visitor"
                            placeholder="Enter Name..." />
                        <div id="search-results"></div>
                    </div>
                    <div class="grid-item">
                        <h3><i class="fa fa-clock"></i> Recent Check-ins</h3>
                        <ul id="recent-checkins"></ul>
                    </div>
                    <div class="grid-item">
                        <h3><i class="fa fa-user-tie"></i> Staff Signed In</h3>
                        <ul id="staff-signed-in"></ul>
                    </div>
                </div>
            </div>

            <!-- Current Visitors Page -->
            <div id="current-visitors" class="page">
                <h1>Current Visitors</h1>
                <div class="table-responsive">
                    <table id="current-visitors-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Company</th>
                                <th>Reason</th>
                                <th>Car Reg</th>
                                <th>Check-Out</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- All Visitors Page -->
            <div id="all-visitors" class="page">
                <h1>All Visitors</h1>
                <div class="table-responsive">
                    <table id="all-visitors-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Last Check-In</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- Staff Attendance Page -->
            <div id="staff-attendance" class="page">
                <h1>Staff Attendance</h1>
                <div class="table-responsive">
                    <table id="staff-attendance-table">
                        <thead>
                            <tr>
                                <th>Staff Name</th>
                                <th>Sign In/Out History</th>
                                <th>Total Hours</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- Emergency Report Page -->
            <div id="emergency-report" class="page">
                <h1>Emergency Report</h1>
                <button id="generate-report-btn" class="btn btn-danger">
                    <i class="fa fa-exclamation-triangle"></i> Generate Report
                </button>
                <div id="report-output"></div>
            </div>
        </div>

        <!-- Visitor Visits Modal -->
        <div id="visitor-visits-modal" class="modal"
            style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.6); z-index:2000; overflow:auto;">
            <div class="modal-content"
                style="background:#fff; margin:10% auto; padding:20px; border-radius:8px; width:80%; max-width:600px; position:relative;">
                <span class="close"
                    style="position:absolute; top:10px; right:15px; font-size:24px; cursor:pointer;">&times;</span>
                <h2>Previous Visits</h2>
                <div id="visitor-visits-content"></div>
            </div>
        </div>

        <!-- Footer (Fixed at Bottom) -->
        <footer>
            <p>&copy; 2025 EJP Designs. All Rights Reserved.</p>
        </footer>

        <script>
      // Modal close logic
      document.addEventListener("DOMContentLoaded", function () {
        const modal = document.getElementById("visitor-visits-modal");
        const closeBtn = modal.querySelector(".close");
        closeBtn.addEventListener("click", function () {
          modal.style.display = "none";
        });
        window.addEventListener("click", function (event) {
          if (event.target === modal) {
            modal.style.display = "none";
          }
        });
      });
    </script>
    </body>
</html>
